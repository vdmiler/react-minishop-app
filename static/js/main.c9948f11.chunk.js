(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},305:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(42),i=n.n(r),o=(n(196),n(407)),s=n(15),u=(n(197),n(13)),l=(n(198),n(80)),j=n(105),d=n(393),b=n(405),h=n(391),O=n(381),m=n(382),x=n(398),f=n(181),p=n(174),g=n.n(p),v=n(16),y=n(39),k=Object(y.c)({name:"basket",initialState:{orders:[],totalAmount:0,isBasketShow:!1,isNoticeShow:!1},reducers:{setOrders:function(e,t){e.orders=t.payload},setTotalAmount:function(e,t){e.totalAmount=t.payload},setBasketShow:function(e,t){e.isBasketShow=t.payload},setNoticeShow:function(e,t){e.isNoticeShow=t.payload}}}),P=k.actions,S=P.setOrders,C=P.setTotalAmount,D=P.setBasketShow,N=P.setNoticeShow,A=k.reducer,w=n(1),I=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(v.b)(),r=Object(s.f)(),i=l.a({name:l.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(20,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),surname:l.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(20,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),email:l.b().email('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b"').required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),o={name:"",surname:"",email:""};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{variant:"h4",component:"h1",sx:{mb:8},children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),function(){var e=Object(f.a)({initialValues:o,validationSchema:i,onSubmit:function(e){alert(JSON.stringify([e].concat(Object(u.a)(n)),null,2)),console.log([e].concat(Object(u.a)(n))),a(S([])),localStorage.removeItem("orders"),r("thanks",{replace:!0})}});return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("form",{className:"checkout__form",onSubmit:e.handleSubmit,children:[Object(w.jsxs)("div",{className:"checkout__fields",children:[Object(w.jsx)(j.a,{className:"checkout__title",variant:"h5",component:"h2",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(w.jsx)("div",{className:"checkout__input",children:Object(w.jsx)(d.a,{fullWidth:!0,id:"name",name:"name",label:"\u0418\u043c\u044f",value:e.values.name,onChange:e.handleChange,error:e.touched.name&&Boolean(e.errors.name),helperText:e.touched.name&&e.errors.name})}),Object(w.jsx)("div",{className:"checkout__input",children:Object(w.jsx)(d.a,{fullWidth:!0,id:"surname",name:"surname",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:e.values.surname,onChange:e.handleChange,error:e.touched.surname&&Boolean(e.errors.surname),helperText:e.touched.surname&&e.errors.surname})}),Object(w.jsx)("div",{className:"checkout__input",children:Object(w.jsx)(d.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&Boolean(e.errors.email),helperText:e.touched.email&&e.errors.email})})]}),Object(w.jsxs)("div",{className:"checkout__check",children:[Object(w.jsx)(j.a,{className:"checkout__title",variant:"h5",component:"h2",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(w.jsxs)(b.a,{children:[n.map((function(e){return Object(w.jsxs)(h.a,{children:[Object(w.jsx)(O.a,{children:Object(w.jsx)(g.a,{})}),Object(w.jsxs)(m.a,{children:[e.displayName," X ",e.quantity," (",e.clothingSize,")"]})]},e.mainId)})),Object(w.jsx)(h.a,{children:Object(w.jsx)(m.a,{children:Object(w.jsxs)("strong",{children:["\u0412\u0441\u0435\u0433\u043e: ",c]})})})]}),Object(w.jsx)(x.a,{className:"checkout__btn",color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})}(),Object(w.jsx)(x.a,{variant:"outlined",onClick:function(){return r(-1)},sx:{mt:8},children:"\u041d\u0430\u0437\u0430\u0434"})]})},_=(n(305),n(406)),q=n(408),z=n(409),F=n(395),B=n(175),M=n.n(B),W=function(e){var t=e.quantity,n=Object(s.e)(),c=Object(v.b)();return Object(w.jsx)(_.a,{position:"fixed",children:Object(w.jsx)(o.a,{fixed:!0,children:Object(w.jsxs)(q.a,{children:[Object(w.jsx)(j.a,{variant:"h6",component:"span",sx:{flexGrow:1},children:"Mini Market"}),"/"===n.pathname?Object(w.jsx)(z.a,{edge:"start",color:"inherit",onClick:function(){return c(D(!0))},children:Object(w.jsx)(F.a,{color:"secondary",badgeContent:t,children:Object(w.jsx)(M.a,{})})}):null]})})})},L=n(415),E=n(27),V=(n(306),n(14)),X=(n(307),n(399)),T=n(410),J=n(411),Q=n(412),R=n(414),U=(n(308),n(387)),G=n(403),H=n(394),K=n(386),Y=n(413),Z=function(e){var t=e.mainId,n=e.imageUrl,c=e.displayName,r=e.displayDescription,i=e.finalPrice,o=e.isActiveModal,s=e.setActiveModal,l=e.clothingSize,d=e.setClothingSize,b=Object(v.b)(),h=Object(v.c)((function(e){return e.basket})).orders,O=Object(a.useState)(!1),m=Object(V.a)(O,2),f=m[0],p=m[1];return Object(w.jsx)(U.a,{open:o,onClose:function(){return s(!1)},"aria-labelledby":c,"aria-describedby":r,children:Object(w.jsxs)(T.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:400,width:"100%",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[Object(w.jsx)(J.a,{component:"img",alt:"green iguana",height:"auto",image:n}),Object(w.jsxs)(Q.a,{children:[Object(w.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"div",children:c}),Object(w.jsx)(j.a,{variant:"body2",color:"text.secondary",children:r}),Object(w.jsxs)(j.a,{sx:{mt:2,mb:2,fontSize:"18px"},children:["\u0426\u0435\u043d\u0430: ",Object(w.jsxs)("span",{style:{color:"red"},children:[i," \u0433\u0440\u043d."]})]}),Object(w.jsxs)(G.a,{fullWidth:!0,error:!!f,children:[Object(w.jsx)(H.a,{id:"size-select-label",children:"\u0420\u0430\u0437\u043c\u0435\u0440:"}),Object(w.jsxs)(K.a,{labelId:"size-label",id:"size-select",value:l,label:"\u0420\u0430\u0437\u043c\u0435\u0440",onChange:function(e){d(e.target.value),""!==e.target.value?p(!1):p(!0)},children:[Object(w.jsx)(Y.a,{value:"M",children:"M"}),Object(w.jsx)(Y.a,{value:"L",children:"L"}),Object(w.jsx)(Y.a,{value:"XL",children:"XL"}),Object(w.jsx)(Y.a,{value:"XXL",children:"XXL"})]})]})]}),Object(w.jsx)(R.a,{children:Object(w.jsx)(x.a,{variant:"outlined",size:"medium",color:"success",sx:{mt:4,ml:"auto",mr:"auto",display:"block"},onClick:function(){""!==l?(!function(e){var t=h.findIndex((function(t){return t.mainId===e.mainId}));if(t<0){var n=Object(E.a)(Object(E.a)({},e),{},{quantity:1});b(S([].concat(Object(u.a)(h),[n])))}else{var c=h.map((function(e,n){return n===t?Object(E.a)(Object(E.a)({},e),{},{quantity:e.quantity+1}):e}));b(S(c))}b(N(!0))}({mainId:t,displayName:c,finalPrice:i,clothingSize:l}),d(""),setTimeout((function(){s(!1)}),1500)):p(!0)},children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})})]})})},$=function(e){var t=e.mainId,n=e.granted,c=e.displayName,r=e.price,i=e.displayDescription,o=n[0].images.full_background,s=r.finalPrice,u=Object(a.useState)(!1),l=Object(V.a)(u,2),d=l[0],b=l[1],h=Object(a.useState)(""),O=Object(V.a)(h,2),m=O[0],f=O[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(X.a,{item:!0,xs:12,md:4,children:Object(w.jsxs)(T.a,{sx:{maxWidth:345,height:"100%",margin:"0 auto"},children:[Object(w.jsx)(J.a,{component:"img",height:"auto",image:o,alt:"green iguana",sx:{cursor:"pointer"},onClick:function(){return b(!0)}}),Object(w.jsxs)(Q.a,{children:[Object(w.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"div",children:c}),Object(w.jsxs)(j.a,{variant:"h6",component:"div",sx:{mb:1,color:"#f44336"},children:[s," \u0433\u0440\u043d."]}),Object(w.jsx)(j.a,{variant:"body2",color:"text.secondary",children:i})]}),Object(w.jsx)(R.a,{children:Object(w.jsx)(x.a,{variant:"outlined",size:"medium",color:"success",sx:{ml:"auto"},onClick:function(){return b(!0)},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})})]})}),Object(w.jsx)(Z,{mainId:t,imageUrl:o,displayName:c,displayDescription:i,finalPrice:s,isActiveModal:d,setActiveModal:b,clothingSize:m,setClothingSize:f})]})},ee=function(){var e=Object(v.c)((function(e){return e.productData})).modifiedProductData;return Object(w.jsx)(w.Fragment,{children:e?Object(w.jsx)(X.a,{container:!0,spacing:2,children:e.map((function(e){return Object(w.jsx)($,Object(E.a)({},e),e.mainId)}))}):Object(w.jsx)("h3",{style:{textAlign:"center"},children:"Nothing here"})})},te=(n(309),n(388)),ne=n(3),ce=n(126),ae=n.n(ce),re=n(177),ie=n(178),oe=n.n(ie),se=Object(y.b)("products/fetchProductData",Object(re.a)(ae.a.mark((function e(){var t,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.a.get("https://fortniteapi.io/v2/shop?lang=ru",{headers:{Authorization:"b1036bbb-be62e965-f85a8fe6-9d3c4535"}});case 3:return t=e.sent,e.next=6,t.data.shop;case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),ue=Object(y.c)({name:"productData",initialState:{originProductData:[],modifiedProductData:[],loadingProgress:!1,errorFetch:null},reducers:{setOriginProductData:function(e,t){e.originProductData=t.payload},setModifiedProductData:function(e,t){e.modifiedProductData=t.payload}},extraReducers:(c={},Object(ne.a)(c,se.pending,(function(e,t){e.loadingProgress=!0})),Object(ne.a)(c,se.fulfilled,(function(e,t){e.loadingProgress=!1,e.originProductData=t.payload,e.modifiedProductData=t.payload})),Object(ne.a)(c,se.rejected,(function(e,t){e.loadingProgress=!1,e.errorFetch=t.payload})),c)}),le=ue.actions,je=(le.setOriginProductData,le.setModifiedProductData),de=ue.reducer,be=Object(y.c)({name:"pagination",initialState:{currentPage:1,productsPerPage:12},reducers:{setCurrentPage:function(e,t){e.currentPage=t.payload},setProductsPerPage:function(e,t){e.productsPerPage=t.payload}}}),he=be.actions,Oe=he.setCurrentPage,me=(he.setProductsPerPage,be.reducer),xe=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.productData})).originProductData,n=Object(v.c)((function(e){return e.pagination})),c=n.currentPage,r=n.productsPerPage,i=c*r,o=i-r,s=t.slice(o,i);Object(a.useEffect)((function(){e(je(s))}),[c]);var u=Math.ceil(t.length/r);return Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{variant:"outlined",color:"primary",count:u,page:c,onChange:function(t,n){e(Oe(n))},sx:{display:"flex",justifyContent:"center",mt:5}})})},fe=(n(329),Object(y.c)({name:"search",initialState:{searchValue:""},reducers:{setSearchValue:function(e,t){e.searchValue=t.payload}}})),pe=fe.actions.setSearchValue,ge=fe.reducer,ve=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.productData})).originProductData,n=Object(v.c)((function(e){return e.search})).searchValue;return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(d.a,{label:"\u0423\u043c\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a...",variant:"outlined",fullWidth:!0,type:"search",value:n,onChange:function(n){return function(n){if(!n)return e(je(t)),void e(pe(""));e(pe(n)),e(je(t.filter((function(e){return e.displayName.toLowerCase().includes(n.toLowerCase())}))))}(n.target.value)},sx:{mb:"1.5rem"}})})},ye=(n(330),n(400)),ke=(n(331),n(384)),Pe=n(385),Se=n(101),Ce=(n(332),n(383)),De=n(180),Ne=n.n(De),Ae=n(179),we=n.n(Ae),Ie=function(e){var t=e.mainId,n=e.displayName,c=e.finalPrice,a=e.clothingSize,r=e.quantity,i=e.plusQuantity,o=void 0===i?function(){}:i,s=e.minusQuantity,u=void 0===s?function(){}:s,l=e.removeFromOrder,j=void 0===l?function(){}:l;return Object(w.jsxs)(h.a,{children:[Object(w.jsxs)(m.a,{sx:{flexBasis:"200px"},children:[n," ",Object(w.jsxs)("strong",{children:[c," \u0433\u0440\u043d. x 1"]})," (",a,")"]}),Object(w.jsxs)(m.a,{sx:{flexDirection:"column",justifyContent:"center",flexShrink:0},children:[Object(w.jsx)(x.a,{onClick:function(){return u(t)},children:Object(w.jsx)(we.a,{})}),Object(w.jsx)("span",{children:r}),Object(w.jsx)(x.a,{onClick:function(){return o(t)},children:Object(w.jsx)(Ne.a,{})})]}),Object(w.jsx)(z.a,{onClick:function(){return j(t)},children:Object(w.jsx)(Ce.a,{})})]})},_e=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(v.b)(),r=function(e){var t=n.map((function(t){if(t.mainId===e){var n=t.quantity+1;return Object(E.a)(Object(E.a)({},t),{},{quantity:n})}return t}));a(S(t))},i=function(e){var t=n.map((function(t){if(t.mainId===e){var n=t.quantity-1;return Object(E.a)(Object(E.a)({},t),{},{quantity:n>=1?n:1})}return t}));a(S(t))},o=function(e){var t=n.filter((function(t){return t.mainId!==e}));a(S(t))};return Object(w.jsxs)(b.a,{sx:{width:"400px"},children:[Object(w.jsxs)(h.a,{children:[Object(w.jsx)(O.a,{children:Object(w.jsx)(ke.a,{})}),Object(w.jsx)(m.a,{primary:"Cart"})]}),Object(w.jsx)(Pe.a,{}),n.length?Object(w.jsxs)(w.Fragment,{children:[n.map((function(e){return Object(w.jsx)(Ie,Object(E.a)(Object(E.a)({},e),{},{plusQuantity:r,minusQuantity:i,removeFromOrder:o}),e.mainId)})),Object(w.jsx)(Pe.a,{}),Object(w.jsx)(h.a,{children:Object(w.jsx)(m.a,{sx:{fontWeight:700},children:Object(w.jsxs)("strong",{children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",c," \u0433\u0440\u043d."]})})}),Object(w.jsx)(h.a,{children:Object(w.jsx)(x.a,{component:Se.b,to:"/checkout",variant:"outlined",onClick:function(){return a(D(!1))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})})]}):Object(w.jsx)(h.a,{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})]})},qe=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(v.b)(),r=Object(v.c)((function(e){return e.basket})).isBasketShow;return Object(w.jsx)(ye.a,{anchor:"right",open:r,onClose:function(){return a(D(!1))},children:Object(w.jsx)(_e,{orders:n,totalAmount:c})})},ze=(n(333),n(392)),Fe=n(390),Be=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.basket})).isNoticeShow;return Object(w.jsx)("div",{children:Object(w.jsx)(ze.a,{open:t,onClose:function(){return e(N(!1))},autoHideDuration:4e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(w.jsx)(Fe.a,{severity:"info",children:"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!"})})})},Me=function(e){var t=e.orders,n=e.totalAmount,c=Object(v.c)((function(e){return e.search})).searchValue,a=Object(v.c)((function(e){return e.productData})),r=a.modifiedProductData,i=a.loadingProgress,o=Object(s.e)();return Object(w.jsxs)(w.Fragment,{children:[i?Object(w.jsx)(L.a,{}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ve,{}),0!==r.length?Object(w.jsx)(ee,{}):Object(w.jsx)("h3",{style:{textAlign:"center"},children:"Nothing not found"}),""===c?Object(w.jsx)(xe,{}):null]}),"/"===o.pathname?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(qe,{orders:t,totalAmount:n}),Object(w.jsx)(Be,{})]}):null]})},We=function(){var e=Object(s.f)();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(j.a,{variant:"h4",component:"h1",sx:{textAlign:"center"},children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0435 \u0435\u0449\u0435!"}),Object(w.jsx)(x.a,{variant:"outlined",sx:{margin:"20px auto 0 auto",display:"block"},onClick:function(){return e("/",{replace:!0})},children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})},Le=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.basket})),n=t.orders,c=t.totalAmount,r=Object(a.useRef)(!0);return Object(a.useEffect)((function(){e(se())}),[]),Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("orders"));null!==t&&t.length>0&&e(S(t))}),[]),Object(a.useEffect)((function(){r.current?r.current=!1:localStorage.setItem("orders",JSON.stringify(n))}),[n]),Object(a.useEffect)((function(){e(C(n.reduce((function(e,t){return e+t.finalPrice*t.quantity}),0)))}),[n]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(W,{quantity:n.length}),Object(w.jsx)(o.a,{sx:{pt:"120px",pb:"88px"},children:Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{path:"/",element:Object(w.jsx)(Me,{orders:n,totalAmount:c})}),Object(w.jsx)(s.a,{path:"checkout",element:Object(w.jsx)(I,{orders:n,totalAmount:c})}),Object(w.jsx)(s.a,{path:"checkout/thanks",element:Object(w.jsx)(We,{})})]})})]})},Ee=Object(y.a)({reducer:{productData:de,basket:A,pagination:me,search:ge}});i.a.render(Object(w.jsx)(Se.a,{children:Object(w.jsx)(v.a,{store:Ee,children:Object(w.jsx)(Le,{})})}),document.getElementById("root"))}},[[334,1,2]]]);
//# sourceMappingURL=main.c9948f11.chunk.js.map