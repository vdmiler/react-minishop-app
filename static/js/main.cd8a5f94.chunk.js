(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},295:function(e,t,n){},296:function(e,t,n){},316:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){},319:function(e,t,n){},320:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(40),i=n.n(r),o=(n(184),n(388)),s=n(15),u=(n(185),n(186),n(75)),l=n(382),j=n(370),d=n(384),b=n(375),h=n(385),O=n(386),f=n(379),m=n(169),x=n(163),p=n.n(x),g=n(1),v=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(s.f)(),r=u.a({name:u.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(20,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),surname:u.b().min(2,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 2 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(20,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),email:u.b().email('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b"').required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),i={name:"",surname:"",email:""};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.a,{variant:"h4",component:"h1",sx:{mb:8},children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),function(){var e=Object(m.a)({initialValues:i,validationSchema:r,onSubmit:function(e){alert(JSON.stringify(e,null,2))}});return Object(g.jsx)("div",{children:Object(g.jsxs)("form",{className:"checkout__form",onSubmit:e.handleSubmit,style:{display:"flex",justifyContent:"space-between"},children:[Object(g.jsxs)("div",{className:"checkout__fields",style:{flexBasis:"50%"},children:[Object(g.jsx)(l.a,{className:"checkout__title",variant:"h5",component:"h2",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),Object(g.jsx)("div",{className:"checkout__input",children:Object(g.jsx)(j.a,{fullWidth:!0,id:"name",name:"name",label:"\u0418\u043c\u044f",value:e.values.name,onChange:e.handleChange,error:e.touched.name&&Boolean(e.errors.name),helperText:e.touched.name&&e.errors.name})}),Object(g.jsx)("div",{className:"checkout__input",children:Object(g.jsx)(j.a,{fullWidth:!0,id:"surname",name:"surname",label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:e.values.surname,onChange:e.handleChange,error:e.touched.surname&&Boolean(e.errors.surname),helperText:e.touched.surname&&e.errors.surname})}),Object(g.jsx)("div",{className:"checkout__input",children:Object(g.jsx)(j.a,{fullWidth:!0,id:"email",name:"email",label:"E-mail",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&Boolean(e.errors.email),helperText:e.touched.email&&e.errors.email})})]}),Object(g.jsxs)("div",{className:"checkout__check",style:{flexBasis:"40%"},children:[Object(g.jsx)(l.a,{className:"checkout__title",variant:"h5",component:"h2",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsxs)(d.a,{children:[n.map((function(e){return Object(g.jsxs)(b.a,{children:[Object(g.jsx)(h.a,{children:Object(g.jsx)(p.a,{})}),Object(g.jsxs)(O.a,{children:[e.displayName," X ",e.quantity]})]},e.mainId)})),Object(g.jsx)(b.a,{children:Object(g.jsx)(O.a,{children:Object(g.jsxs)("strong",{children:["\u0412\u0441\u0435\u0433\u043e: ",c]})})})]}),Object(g.jsx)(f.a,{className:"checkout__btn",color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})})}(),Object(g.jsx)(f.a,{variant:"outlined",onClick:function(){return a(-1)},sx:{mt:8},children:"\u041d\u0430\u0437\u0430\u0434"})]})},y=(n(293),n(387)),P=n(389),k=n(390),C=n(377),S=n(164),D=n.n(S),N=n(16),w=n(38),_=Object(w.c)({name:"basket",initialState:{orders:[],totalAmount:0,isBasketShow:!1,isNoticeShow:!1},reducers:{setOrders:function(e,t){e.orders=t.payload},setTotalAmount:function(e,t){e.totalAmount=t.payload},setBasketShow:function(e,t){e.isBasketShow=t.payload},setNoticeShow:function(e,t){e.isNoticeShow=t.payload}}}),A=_.actions,q=A.setOrders,I=A.setTotalAmount,B=A.setBasketShow,F=A.setNoticeShow,E=_.reducer,V=function(e){var t=e.quantity,n=Object(s.e)(),c=Object(N.b)();return Object(g.jsx)(y.a,{position:"fixed",children:Object(g.jsx)(o.a,{fixed:!0,children:Object(g.jsxs)(P.a,{children:[Object(g.jsx)(l.a,{variant:"h6",component:"span",sx:{flexGrow:1},children:"Mini Market"}),"/"===n.pathname?Object(g.jsx)(k.a,{edge:"start",color:"inherit",onClick:function(){return c(B(!0))},children:Object(g.jsx)(C.a,{color:"secondary",badgeContent:t,children:Object(g.jsx)(D.a,{})})}):null]})})})},W=n(396),J=n(27),M=(n(294),n(13)),T=(n(295),n(380)),Q=n(391),z=n(392),L=n(393),R=n(394),G=function(e){var t=e.mainId,n=e.granted,c=e.displayName,a=e.price,r=e.displayDescription,i=Object(N.b)(),o=Object(N.c)((function(e){return e.basket})).orders,s=n[0].images.full_background,u=a.finalPrice;return Object(g.jsx)(T.a,{item:!0,xs:12,md:4,children:Object(g.jsxs)(Q.a,{sx:{maxWidth:345,height:"100%",margin:"0 auto"},children:[Object(g.jsx)(z.a,{component:"img",height:"auto",image:s,alt:"green iguana"}),Object(g.jsxs)(L.a,{children:[Object(g.jsx)(l.a,{gutterBottom:!0,variant:"h5",component:"div",children:c}),Object(g.jsxs)(l.a,{variant:"h6",component:"div",sx:{mb:1,color:"#f44336"},children:[u," \u0433\u0440\u043d."]}),Object(g.jsx)(l.a,{variant:"body2",color:"text.secondary",children:r})]}),Object(g.jsx)(R.a,{children:Object(g.jsx)(f.a,{variant:"outlined",size:"medium",color:"success",sx:{ml:"auto"},onClick:function(){return function(e){var t=o.findIndex((function(t){return t.mainId===e.mainId}));if(t<0){var n=Object(J.a)(Object(J.a)({},e),{},{quantity:1});i(q([].concat(Object(M.a)(o),[n])))}else{var c=o.map((function(e,n){return n===t?Object(J.a)(Object(J.a)({},e),{},{quantity:e.quantity+1}):e}));i(q(c))}i(F(!0))}({mainId:t,displayName:c,finalPrice:u})},children:"\u041a\u0443\u043f\u0438\u0442\u044c"})})]})})},H=function(){var e=Object(N.c)((function(e){return e.productData})).modifiedProductData;return Object(g.jsx)(g.Fragment,{children:e?Object(g.jsx)(T.a,{container:!0,spacing:2,children:e.map((function(e){return Object(g.jsx)(G,Object(J.a)({},e),e.mainId)}))}):Object(g.jsx)("h3",{style:{textAlign:"center"},children:"Nothing here"})})},X=(n(296),n(372)),K=n(4),U=n(118),Y=n.n(U),Z=n(165),$=n(166),ee=n.n($),te=Object(w.b)("products/fetchProductData",Object(Z.a)(Y.a.mark((function e(){var t,n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ee.a.get("https://fortniteapi.io/v2/shop?lang=ru",{headers:{Authorization:"b1036bbb-be62e965-f85a8fe6-9d3c4535"}});case 3:return t=e.sent,e.next=6,t.data.shop;case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.response);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))),ne=Object(w.c)({name:"productData",initialState:{originProductData:[],modifiedProductData:[],loadingProgress:!1,errorFetch:null},reducers:{setOriginProductData:function(e,t){e.originProductData=t.payload},setModifiedProductData:function(e,t){e.modifiedProductData=t.payload}},extraReducers:(c={},Object(K.a)(c,te.pending,(function(e,t){e.loadingProgress=!0})),Object(K.a)(c,te.fulfilled,(function(e,t){e.loadingProgress=!1,e.originProductData=t.payload,e.modifiedProductData=t.payload})),Object(K.a)(c,te.rejected,(function(e,t){e.loadingProgress=!1,e.errorFetch=t.payload})),c)}),ce=ne.actions,ae=(ce.setOriginProductData,ce.setModifiedProductData),re=ne.reducer,ie=Object(w.c)({name:"pagination",initialState:{currentPage:1,productsPerPage:12},reducers:{setCurrentPage:function(e,t){e.currentPage=t.payload},setProductsPerPage:function(e,t){e.productsPerPage=t.payload}}}),oe=ie.actions,se=oe.setCurrentPage,ue=(oe.setProductsPerPage,ie.reducer),le=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.productData})).originProductData,n=Object(N.c)((function(e){return e.pagination})),c=n.currentPage,r=n.productsPerPage,i=c*r,o=i-r,s=t.slice(o,i);Object(a.useEffect)((function(){e(ae(s))}),[c]);var u=Math.ceil(t.length/r);return Object(g.jsx)("div",{children:Object(g.jsx)(X.a,{variant:"outlined",color:"primary",count:u,page:c,onChange:function(t,n){e(se(n))},sx:{display:"flex",justifyContent:"center",mt:5}})})},je=(n(316),Object(w.c)({name:"search",initialState:{searchValue:""},reducers:{setSearchValue:function(e,t){e.searchValue=t.payload}}})),de=je.actions.setSearchValue,be=je.reducer,he=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.productData})).originProductData,n=Object(N.c)((function(e){return e.search})).searchValue;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{label:"\u0423\u043c\u043d\u044b\u0439 \u043f\u043e\u0438\u0441\u043a...",variant:"outlined",fullWidth:!0,type:"search",value:n,onChange:function(n){return function(n){if(!n)return e(ae(t)),void e(de(""));e(de(n)),e(ae(t.filter((function(e){return e.displayName.toLowerCase().includes(n.toLowerCase())}))))}(n.target.value)},sx:{mb:"1.5rem"}})})},Oe=(n(317),n(381)),fe=(n(318),n(369)),me=n(395),xe=n(95),pe=(n(319),n(368)),ge=n(168),ve=n.n(ge),ye=n(167),Pe=n.n(ye),ke=function(e){var t=e.mainId,n=e.displayName,c=e.finalPrice,a=e.quantity,r=e.plusQuantity,i=void 0===r?function(){}:r,o=e.minusQuantity,s=void 0===o?function(){}:o,u=e.removeFromOrder,l=void 0===u?function(){}:u;return Object(g.jsxs)(b.a,{children:[Object(g.jsxs)(O.a,{sx:{flexBasis:"200px"},children:[n," ",Object(g.jsxs)("strong",{children:[c," \u0433\u0440\u043d. x 1"]})]}),Object(g.jsxs)(O.a,{sx:{flexDirection:"column",justifyContent:"center",flexShrink:0},children:[Object(g.jsx)(f.a,{onClick:function(){return s(t)},children:Object(g.jsx)(Pe.a,{})}),Object(g.jsx)("span",{children:a}),Object(g.jsx)(f.a,{onClick:function(){return i(t)},children:Object(g.jsx)(ve.a,{})})]}),Object(g.jsx)(k.a,{onClick:function(){return l(t)},children:Object(g.jsx)(pe.a,{})})]})},Ce=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(N.b)(),r=function(e){var t=n.map((function(t){if(t.mainId===e){var n=t.quantity+1;return Object(J.a)(Object(J.a)({},t),{},{quantity:n})}return t}));a(q(t))},i=function(e){var t=n.map((function(t){if(t.mainId===e){var n=t.quantity-1;return Object(J.a)(Object(J.a)({},t),{},{quantity:n>=1?n:1})}return t}));a(q(t))},o=function(e){var t=n.filter((function(t){return t.mainId!==e}));a(q(t))};return Object(g.jsxs)(d.a,{sx:{width:"400px"},children:[Object(g.jsxs)(b.a,{children:[Object(g.jsx)(h.a,{children:Object(g.jsx)(fe.a,{})}),Object(g.jsx)(O.a,{primary:"Cart"})]}),Object(g.jsx)(me.a,{}),n.length?Object(g.jsxs)(g.Fragment,{children:[n.map((function(e){return Object(g.jsx)(ke,Object(J.a)(Object(J.a)({},e),{},{plusQuantity:r,minusQuantity:i,removeFromOrder:o}),e.mainId)})),Object(g.jsx)(me.a,{}),Object(g.jsx)(b.a,{children:Object(g.jsx)(O.a,{sx:{fontWeight:700},children:Object(g.jsxs)("strong",{children:["\u041e\u0431\u0449\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",c," \u0433\u0440\u043d."]})})}),Object(g.jsx)(b.a,{children:Object(g.jsx)(f.a,{component:xe.b,to:"/checkout",variant:"outlined",onClick:function(){return a(B(!1))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})})]}):Object(g.jsx)(b.a,{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})]})},Se=function(e){var t=e.orders,n=void 0===t?[]:t,c=e.totalAmount,a=Object(N.b)(),r=Object(N.c)((function(e){return e.basket})).isBasketShow;return Object(g.jsx)(Oe.a,{anchor:"right",open:r,onClose:function(){return a(B(!1))},children:Object(g.jsx)(Ce,{orders:n,totalAmount:c})})},De=(n(320),n(376)),Ne=n(374),we=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.basket})).isNoticeShow;return Object(g.jsx)("div",{children:Object(g.jsx)(De.a,{open:t,onClose:function(){return e(F(!1))},autoHideDuration:4e3,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(g.jsx)(Ne.a,{severity:"info",children:"\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443!"})})})},_e=function(e){var t=e.orders,n=e.totalAmount,c=Object(N.c)((function(e){return e.search})).searchValue,a=Object(N.c)((function(e){return e.productData})),r=a.modifiedProductData,i=a.loadingProgress,o=Object(s.e)();return Object(g.jsxs)(g.Fragment,{children:[i?Object(g.jsx)(W.a,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(he,{}),0!==r.length?Object(g.jsx)(H,{}):Object(g.jsx)("h3",{style:{textAlign:"center"},children:"Nothing not found"}),""===c?Object(g.jsx)(le,{}):null]}),"/"===o.pathname?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(Se,{orders:t,totalAmount:n}),Object(g.jsx)(we,{})]}):null]})},Ae=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.basket})),n=t.orders,c=t.totalAmount,r=Object(a.useRef)(!0);return Object(a.useEffect)((function(){e(te())}),[]),Object(a.useEffect)((function(){var t=JSON.parse(localStorage.getItem("orders"));null!==t&&t.length>0&&e(q(t))}),[]),Object(a.useEffect)((function(){r.current?r.current=!1:localStorage.setItem("orders",JSON.stringify(n))}),[n]),Object(a.useEffect)((function(){e(I(n.reduce((function(e,t){return e+t.finalPrice*t.quantity}),0)))}),[n]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(V,{quantity:n.length}),Object(g.jsx)(o.a,{sx:{pt:"120px",pb:"88px"},children:Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:"/",element:Object(g.jsx)(_e,{orders:n,totalAmount:c})}),Object(g.jsx)(s.a,{path:"checkout",element:Object(g.jsx)(v,{orders:n,totalAmount:c})})]})})]})},qe=Object(w.a)({reducer:{productData:re,basket:E,pagination:ue,search:be}});i.a.render(Object(g.jsx)(xe.a,{children:Object(g.jsx)(N.a,{store:qe,children:Object(g.jsx)(Ae,{})})}),document.getElementById("root"))}},[[321,1,2]]]);
//# sourceMappingURL=main.cd8a5f94.chunk.js.map